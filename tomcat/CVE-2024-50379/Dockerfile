FROM debian:12
LABEL maintaner='the29a'

RUN apt update ; apt install -y default-jdk wget

RUN useradd tomcat -U -s /bin/false -d /opt/tomcat -m
WORKDIR /root
RUN wget https://archive.apache.org/dist/tomcat/tomcat-11/v11.0.0-M1/bin/apache-tomcat-11.0.0-M1.tar.gz -O tomcat.tar.gz

RUN mkdir -p /opt/tomcat
RUN tar zxvf tomcat.tar.gz -C /opt/tomcat --strip-components 1
COPY ./conf/web.xml /opt/tomcat/conf/web.xml
COPY ./conf/context.xml /opt/tomcat/conf/context.xml
RUN chown -R tomcat:tomcat /opt/tomcat

EXPOSE 8080
